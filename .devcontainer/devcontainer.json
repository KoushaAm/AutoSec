{
   "name": "AutoSec Dev Container",
   "build": {
      "context": "..",
      "dockerfile": "dev.Dockerfile"
   },

   "remoteUser": "vscode",

   "workspaceFolder": "/workspaces/autosec",
   "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/autosec,type=bind,consistency=cached",

   // Docker-outside-of-Docker
   "mounts": ["source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"],

   // Ensure vscode user can access the docker socket (common fix on Linux)
   "runArgs": ["--init", "--group-add=0"],

    "containerEnv": {
        "HOST_WORKSPACE": "${localWorkspaceFolder}"
    },

   "customizations": {
      "vscode": {
         "extensions": [
            "ms-azuretools.vscode-docker",
            "ms-python.python",
            "ms-python.vscode-pylance",
            "redhat.java",
            "vscjava.vscode-maven",
            "eamodio.gitlens",
            "aaron-bond.better-comments",
            "streetsidesoftware.code-spell-checker",
            "vscode-icons-team.vscode-icons"
         ],
         "settings": {
            "terminal.integrated.defaultProfile.linux": "bash",

            // Prefer the project venv (created in postCreate)
            "python.defaultInterpreterPath": "/workspaces/autosec/.venv/bin/python",
            "python.terminal.activateEnvironment": true,

            // Helps Pylance find your modules
            "python.analysis.extraPaths": ["/workspaces/autosec"],

            // Optional but nice: avoid "Select Interpreter" nag
            "python.venvPath": "/workspaces/autosec"
         }
      }
   }
}
